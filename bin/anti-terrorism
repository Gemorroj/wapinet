#!/usr/bin/env php
<?php
/**
 * Create file `bin/anti-terrorism`
 * Add to composer.json like this:
```
"scripts": {
    "post-install-cmd": [
        "@php bin/anti-terrorism"
    ],
    "post-update-cmd": [
        "@php bin/anti-terrorism"
    ]
}
```
 */

declare(strict_types=1);

$vendorDir = \dirname(__DIR__).'/vendor';

$filePath = $vendorDir.'/symfony/framework-bundle/Console/Application.php';
$fileData = @\file_get_contents($filePath);
if (false === $fileData) {
    return;
}

$count = 0;
$patchedData = \str_replace(
    ' <bg=#0057B7;fg=#FFDD00>#StandWith</><bg=#FFDD00;fg=#0057B7>Ukraine</> <href=https://sf.to/ukraine>https://sf.to/ukraine</>',
    '',
    $fileData,
    $count
);
if ($count) {
    $result = @\file_put_contents($filePath, $patchedData);
    if (false === $result) {
        return;
    }
}

echo "\033[32m[OK]\033[0m".\PHP_EOL;
